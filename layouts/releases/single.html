{{ partial "header.html" .}}

{{ $chan_desc := (dict "stable" "The Stable channel is intended for use in production clusters. Versions of Flatcar Linux have been tested as they move through Alpha and Beta channels before being promoted to stable." "alpha" "The Alpha channel follows a more frequent release cadence and is where new updates are introduced. Users can try the new versions of the Linux kernel, systemd and other core packages." "beta" "The Beta channel is where Flatcar Linux stability is solidified. We encourage including some beta machines in production clusters in order to catch any issues that may arise with your setup." "edge" "The Edge channel includes bleeding-edge features with the newest versions of the Linux kernel, systemd and other core packages. Can be highly unstable.") }}

<div class="container">
  <div class="row mt-5">
  <h2>Release Channels</h2>
    <div class="card-deck mt-3">
       {{ range $i, $chan := sort $.Site.Data.releases "" "desc" }}
       <div class="card">
           <div class="card-header align-middle">
               <h5 class="d-inline"> {{ humanize $chan.current.channel }} </h5>
               <a href="https://{{ $chan.current.channel }}.release.flatcar-linux.net/amd64-usr/{{ $chan.current.version }}/" class="pull-right">
                   {{ $chan.current.version }}</a>
           </div>
           <div class="card-body">
             <p>{{ index $chan_desc $chan.current.channel }}</p>
           </div>
           <div class="card-footer">
               {{ range $pkg, $ver := $chan.current.image_packages }}
                 {{ $.Scratch.SetInMap "pkgPkgMap" $pkg $pkg }}
               {{ end }}
               {{ $pkgSorted := $.Scratch.GetSortedMapValues "pkgPkgMap" }}
               {{ $.Scratch.Delete "pkgPkgMap" }}
               {{ range $i, $ver := sort $chan.current.image_packages "" }}
              <span class="badge badge-light">{{ index $pkgSorted $i }} -<span class="font-weight-light"> {{ $ver }}</span></span>
              {{ end }}
           </div>
           <div class="card-footer">
             <span class="badge badge-light">
               Release Date: <span class="font-weight-light">{{ dateFormat "Jan 2, 2006" $chan.current.github_release.published_at }}</span>
             </span>
           </div>
       </div>
       {{ end }}
    </div>
  </div>

  <div class="row mt-5">
      <h2>Release Notes</h2>
      <div class="mt-3">
	        <ul class="nav nav-tabs" id="release-tabs" role="tablist">
              {{ range $i, $chan := sort $.Site.Data.releases "" "desc" }}
		          <li class="nav-item">
			            <a class="nav-link {{ if eq $chan.current.channel "stable" }}active{{ end }}" id="{{ $chan.current.channel }}-release-tab"
                     data-toggle="tab" href="#{{ $chan.current.channel }}-release" role="tab"
                     aria-controls="{{ $chan.current.channel }}-release"
                     aria-selected="true">
                      {{ humanize $chan.current.channel }} Channel
                  </a>
		          </li>
              {{ end }}
	        </ul>
	        <div class="tab-content p-3" id="release-tabs-content">
              {{ range $i, $chan := sort $.Site.Data.releases "" "desc" }}
              <div class="tab-pane fade {{ if eq $chan.current.channel "stable" }} active show {{ end }}" id="{{ $chan.current.channel }}-release"
                   role="tabpanel" aria-labelledby="{{ $chan.current.channel }}-release-tab">
                  {{ range $pkg, $ver := $chan.current.image_packages }}
                  {{ $.Scratch.SetInMap "pkgPkgMap" $pkg $pkg }}
                  {{ end }}
                  {{ $pkgSorted := $.Scratch.GetSortedMapValues "pkgPkgMap" }}
			            {{ partial "release-notes.html" (dict "ctx" . "chan" $chan "pkgs" $pkgSorted) }}
                  {{ $.Scratch.Delete "pkgPkgMap" }}
		          </div>
              {{ end }}
	        </div>
      </div>
  </div>
</div> <!-- container -->

{{ partial "footer.html" .}}
