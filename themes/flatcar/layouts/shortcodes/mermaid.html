<pre class="mermaid">
{{- .Inner -}}
</pre>
{{- if not (.Page.Scratch.Get "mermaidLoaded") -}}
{{- .Page.Scratch.Set "mermaidLoaded" true -}}
<script src="https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.min.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        mermaid.initialize({ startOnLoad: true, theme: 'default', securityLevel: 'loose' });
    });
</script>
<noscript>
    <style>.mermaid { display:none; }</style>
    <p><em>JavaScript is required to view diagrams.</em></p>
</noscript>
{{- end -}}